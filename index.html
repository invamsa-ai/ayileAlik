<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PHONEX | Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;500;700;900&family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        :root { --primary-red: #e63946; --bg-white: #ffffff; --text-dark: #1d1d1f; --soft-gray: #f5f5f7; --border-color: #d2d2d7; --glow: rgba(230, 57, 70, 0.4); --success: #34c759; --font-heading: 'Cairo', sans-serif; --font-body: 'Tajawal', sans-serif; }
        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; }
        body { background: var(--bg-white); color: var(--text-dark); overflow: hidden; font-family: var(--font-body); }
        h1, h2, h3, h4, .product-name, .btn-main { font-family: var(--font-heading); }
        a { text-decoration: none; color: inherit; }
        ul { list-style: none; }
        
        /* Intro & Main Structure */
        .intro-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background: #ffffff; z-index: 10000; display: flex; align-items: center; justify-content: center; transition: 1s cubic-bezier(0.8, 0, 0.2, 1); }
        .intro-container { display: flex; width: 85%; max-width: 1400px; align-items: center; justify-content: space-between; }
        .intro-left { flex: 1; perspective: 1000px; }
        .phone-wrapper { position: relative; transform: rotateY(20deg) rotateX(5deg); transition: 0.1s; animation: phoneEntrance 1.5s ease-out; }
        .phone-3d { width: 100%; max-width: 450px; filter: drop-shadow(30px 50px 80px rgba(0,0,0,0.2)); }
        .intro-right { flex: 1; text-align: right; }
        
        .logo-large { margin-bottom: 20px; animation: fadeInUp 1s; }
        .logo-large img { width: 250px; height: auto; object-fit: contain; }

        .tagline { font-size: 1.5rem; color: #86868b; margin-bottom: 30px; animation: fadeInUp 1.2s; font-weight: 500; }
        .enter-btn-main { padding: 18px 50px; font-size: 1.2rem; background: var(--primary-red); color: white; border: none; border-radius: 50px; cursor: pointer; transition: 0.3s; box-shadow: 0 10px 30px var(--glow); font-family: var(--font-heading); font-weight: 700; }
        .enter-btn-main:hover { transform: scale(1.05); }
        .intro-hidden { transform: translateY(-100%); opacity: 0; pointer-events: none; }

        #app { opacity: 0; transition: opacity 1s ease 0.5s; display: none; }
        #app.visible { opacity: 1; display: block; }
        
        /* ğŸ”´ ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„Ù‡ÙŠØ¯Ø± (Navbar) Ù„Ø¬Ø¹Ù„Ù‡ Ø£ØµØºØ± ÙˆÙ…ØªØ¬Ø§ÙˆØ¨ */
        .navbar { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 10px 5%; /* ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø­ÙˆØ§Ù Ø§Ù„Ø¹Ù„ÙˆÙŠØ© ÙˆØ§Ù„Ø³ÙÙ„ÙŠØ© */
            position: fixed; 
            top: 0; 
            width: 100%; 
            height: 70px; /* ØªØ­Ø¯ÙŠØ¯ Ø§Ø±ØªÙØ§Ø¹ Ø«Ø§Ø¨Øª ÙˆØµØºÙŠØ± */
            z-index: 999; 
            background: rgba(255,255,255,0.98); 
            backdrop-filter: blur(10px); 
            border-bottom: 1px solid rgba(0,0,0,0.05); 
            box-shadow: 0 2px 10px rgba(0,0,0,0.02);
        }
        
        /* ØªØµØºÙŠØ± Ø§Ù„Ø´Ø¹Ø§Ø± ÙÙŠ Ø§Ù„Ù†Ø§Ù Ø¨Ø§Ø± */
        .nav-logo svg { width: 90px; height: auto; fill: var(--primary-red); transition: 0.3s; }
        
        .nav-links { display: flex; gap: 25px; }
        .nav-item { cursor: pointer; font-weight: 600; transition: 0.3s; font-size: 1rem; position: relative; } /* ØªØµØºÙŠØ± Ø§Ù„Ø®Ø· Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
        .nav-item:hover, .nav-item.active { color: var(--primary-red); }
        
        /* Ø¥Ø¶Ø§ÙØ© Ø®Ø· ØªØ­Øª Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù†Ø´Ø· */
        .nav-item.active::after {
            content: ''; position: absolute; bottom: -5px; left: 0; width: 100%; height: 2px; background: var(--primary-red); border-radius: 2px;
        }

        .cart-icon { position: relative; cursor: pointer; display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; border-radius: 50%; transition: 0.3s; }
        .cart-icon:hover { background: #f5f5f7; }
        .cart-icon i { font-size: 1.2rem; }
        .cart-badge { position: absolute; top: 0px; right: 0px; background: var(--primary-red); color: white; font-size: 0.7rem; padding: 2px 5px; border-radius: 50%; font-family: 'Segoe UI', sans-serif; border: 2px solid white; }
        
        .page-section { display: none; padding-top: 90px; /* ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§ÙØ© Ù„ØªØ¹ÙˆÙŠØ¶ Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø£ØµØºØ± */ min-height: 100vh; animation: fadeIn 0.5s; }
        .page-section.active { display: block; }

        /* Sections */
        .hero-banner { display: flex; align-items: center; justify-content: space-between; padding: 0 5%; height: 85vh; }
        .hero-text h1 { font-size: 4rem; line-height: 1.2; margin-bottom: 20px; font-weight: 900; }
        .hero-img img { max-width: 500px; transform: rotate(-10deg); filter: drop-shadow(0 20px 40px rgba(0,0,0,0.2)); }
        
        .products-container { padding: 0 5% 50px; }
        .section-header { text-align: center; margin-bottom: 50px; }
        .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 25px; }
        .product-card { background: white; border-radius: 25px; padding: 15px; text-align: center; transition: 0.4s; border: 1px solid transparent; cursor: pointer; position: relative; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.03); }
        .product-card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); border-color: var(--soft-gray); }
        .img-container { width: 100%; height: 260px; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 20px; margin-bottom: 15px; position: relative; padding: 10px; display: flex; align-items: center; justify-content: center; }
        .product-img { width: 100%; height: 100%; object-fit: contain; transition: 0.5s ease; filter: drop-shadow(0 10px 15px rgba(0,0,0,0.1)); }
        .product-card:hover .product-img { transform: scale(1.05); filter: drop-shadow(0 20px 25px rgba(0,0,0,0.2)); }
        .product-name { font-size: 1.1rem; margin-bottom: 5px; font-weight: 700; color: #333; }
        .product-price { color: var(--primary-red); font-weight: 800; font-size: 1.2rem; font-family: 'Segoe UI', sans-serif; }
        .add-btn { margin-top: 15px; width: 100%; padding: 12px; background: var(--text-dark); color: white; border: none; border-radius: 12px; cursor: pointer; transition: 0.2s; font-family: var(--font-body); font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .add-btn:hover { background: var(--primary-red); }
        
        .detail-view { display: flex; gap: 50px; padding: 0 10%; align-items: center; }
        .detail-img-box { flex: 1; text-align: center; background: var(--soft-gray); border-radius: 30px; padding: 60px; }
        .detail-img-box img { max-width: 100%; filter: drop-shadow(0 20px 40px rgba(0,0,0,0.15)); }
        .detail-info { flex: 1; }
        .detail-title { font-size: 3rem; margin-bottom: 10px; font-weight: 900; line-height: 1.1; }
        .detail-price { font-size: 2.5rem; color: var(--primary-red); margin-bottom: 20px; display: block; font-weight: 800; }
        .specs-list { margin: 30px 0; }
        .specs-list li { margin-bottom: 15px; display: flex; align-items: center; gap: 10px; font-size: 1.1rem; }
        .cart-sidebar { position: fixed; top: 0; left: 0; width: 400px; height: 100%; background: white; box-shadow: 5px 0 30px rgba(0,0,0,0.1); z-index: 1000; padding: 25px; transform: translateX(-100%); transition: 0.4s cubic-bezier(0.77, 0, 0.175, 1); display: flex; flex-direction: column; }
        .cart-sidebar.open { transform: translateX(0); }
        .cart-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid var(--soft-gray); }
        .cart-items { flex: 1; overflow-y: auto; }
        .cart-item { display: flex; gap: 15px; margin-bottom: 20px; align-items: center; background: #fff; padding: 10px; border-radius: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.03); }
        .cart-item img { width: 60px; height: 60px; object-fit: contain; background: var(--soft-gray); border-radius: 12px; padding: 5px; }
        .cart-footer { margin-top: auto; padding-top: 20px; border-top: 1px solid var(--soft-gray); }
        .total-row { display: flex; justify-content: space-between; font-size: 1.3rem; font-weight: 800; margin-bottom: 20px; font-family: var(--font-heading); }
        .checkout-btn { width: 100%; padding: 18px; background: var(--primary-red); color: white; border: none; border-radius: 18px; font-size: 1.2rem; cursor: pointer; font-weight: 700; font-family: var(--font-heading); box-shadow: 0 10px 20px rgba(230, 57, 70, 0.3); transition: 0.3s; }
        .checkout-container { max-width: 900px; margin: 0 auto; display: grid; grid-template-columns: 1.5fr 1fr; gap: 50px; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 0.95rem; color: #555; }
        .form-control { width: 100%; padding: 15px; border: 1px solid var(--border-color); border-radius: 12px; font-size: 1rem; transition: 0.3s; background: #fcfcfc; }
        .payment-methods { background: white; padding: 25px; border-radius: 20px; margin-bottom: 20px; border: 1px solid #eee; }
        .payment-option { display: flex; align-items: center; gap: 15px; margin-bottom: 12px; cursor: pointer; padding: 15px; background: #f8f9fa; border-radius: 12px; border: 2px solid transparent; transition: 0.2s; }
        .payment-option.selected { border-color: var(--primary-red); background: #fff5f5; }
        .payment-option.disabled { opacity: 0.5; pointer-events: none; background: #eee; }
        .order-summary { background: white; padding: 30px; border-radius: 25px; height: fit-content; border: 1px solid #eee; box-shadow: 0 10px 40px rgba(0,0,0,0.03); }
        .summary-row { display: flex; justify-content: space-between; margin-bottom: 15px; font-weight: 500; }
        
        .orders-container { max-width: 800px; margin: 0 auto; padding: 0 5%; }
        .search-box { display: flex; gap: 10px; margin-bottom: 30px; }
        .order-card { background: white; padding: 20px; border-radius: 20px; border: 1px solid #eee; margin-bottom: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.03); }
        .order-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; padding-bottom: 10px; margin-bottom: 10px; }
        .status-badge { padding: 5px 12px; border-radius: 10px; font-size: 0.8rem; font-weight: bold; }
        .status-pending { background: #fff3cd; color: #856404; }
        .status-shipped { background: #d4edda; color: #155724; }
        .status-completed { background: #cce5ff; color: #004085; }

        .whatsapp-float { position: fixed; bottom: 30px; right: 30px; z-index: 1001; display: flex; flex-direction: column; gap: 10px; }
        .wa-btn { width: 60px; height: 60px; background: #25D366; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 30px; box-shadow: 0 10px 20px rgba(37, 211, 102, 0.3); cursor: pointer; transition: 0.3s; text-decoration: none; position: relative; }
        .wa-tooltip { position: absolute; right: 70px; background: #333; color: white; padding: 5px 10px; border-radius: 5px; font-size: 0.8rem; white-space: nowrap; opacity: 0; transition: 0.3s; pointer-events: none; font-family: var(--font-body); }
        .wa-btn:hover .wa-tooltip { opacity: 1; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes phoneEntrance { 0% { transform: translateX(-300px) rotateY(60deg); opacity: 0; } 100% { transform: translateX(0) rotateY(20deg); opacity: 1; } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        @media (max-width: 768px) {
            /* ğŸ”´ ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ Ù„Ù„Ù‡ÙŠØ¯Ø± */
            .navbar { padding: 10px 15px; height: 60px; } /* Ø§Ø±ØªÙØ§Ø¹ Ø£Ù‚Ù„ Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
            .nav-logo svg { width: 70px; } /* Ø´Ø¹Ø§Ø± Ø£ØµØºØ± */
            .nav-links { gap: 15px; }
            .nav-item { font-size: 0.9rem; } /* Ø®Ø· Ø£ØµØºØ± Ù„Ù„Ø±ÙˆØ§Ø¨Ø· */
            
            .intro-container { flex-direction: column; text-align: center; }
            .hero-banner { flex-direction: column-reverse; text-align: center; justify-content: center; }
            .hero-img img { width: 80%; margin-bottom: 30px; }
            .detail-view { flex-direction: column; }
            .checkout-container { grid-template-columns: 1fr; }
            .cart-sidebar { width: 100%; max-width: 350px; }
            .products-grid { grid-template-columns: repeat(2, 1fr); gap: 15px; }
            .product-card { padding: 10px; border-radius: 15px; }
            .img-container { height: 160px; border-radius: 12px; margin-bottom: 10px; padding: 5px; }
            .product-name { font-size: 0.95rem; }
            .product-price { font-size: 1rem; }
            .add-btn { font-size: 0.85rem; padding: 8px; margin-top: 10px; }
            .hero-text h1 { font-size: 3rem; }
        }
    </style>
</head>
<body>

    <div id="intro" class="intro-screen">
        <div class="intro-container">
            <div class="intro-left">
                <div class="phone-wrapper" id="phoneWrapper">
                    <img src="iphone17.png" alt="iPhone 3D" class="phone-3d">
                </div>
            </div>
            <div class="intro-right">
                <div class="logo-large">
                    <img src="lo.png" alt="PHONEX Large Logo">
                </div>
                      <button class="enter-btn-main" onclick="enterApp()">ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†</button>
                <br>
                <h2 class="tagline">Ø£ÙˆÙ„ Ù…ØªØ¬Ø± Ø¹Ø±Ø§Ù‚ÙŠ Ø§Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ø¨ÙŠØ¹ Ø§Ù„Ù‡Ø§ØªÙ Ø¨Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ø±Ø³Ù…Ø© Ø¯ÙˆÙ† ØªØ­Ù…ÙŠÙ„</h2>
          
            </div>
        </div>
    </div>

    <div id="app">
        <nav class="navbar">
            <div class="nav-logo">
                <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
                 width="100%" height="100%" viewBox="0 0 2048.000000 2048.000000"
                 preserveAspectRatio="xMidYMid meet">
                <g transform="translate(0.000000,2048.000000) scale(0.100000,-0.100000)"
                fill="#e63946" stroke="none">
                <path d="M12835 14754 c-16 -13 -31 -24 -35 -24 -17 0 -170 -165 -194 -211
                -24 -44 -28 -60 -24 -113 6 -91 49 -139 140 -154 88 -15 37 -50 -127 -87 -41
                -9 -75 -20 -75 -25 0 -5 15 -43 34 -84 l34 -75 62 4 c95 6 121 20 224 125 98
                100 116 133 100 179 -10 28 -70 66 -117 75 -126 23 -127 51 -1 115 82 41 96
                69 78 154 -30 143 -48 165 -99 121z"/>
                <path d="M9685 14416 c-106 -46 -148 -220 -78 -320 28 -39 31 -41 88 -44 33
                -2 69 2 80 8 54 29 72 127 36 186 -26 42 -78 60 -127 44 -19 -7 -38 -10 -41
                -7 -14 40 76 75 88 47 14 54 22 46 42 -7 20 -38 21 -79 3z m60 -191 c46
                -45 22 -135 -35 -135 -32 0 -70 44 -70 81 0 37 33 79 62 79 10 0 30 -11 43
                -25z"/>
                <path d="M9303 14370 c-57 -34 -86 -120 -40 -120 27 0 47 17 47 40 0 44 73 66
                103 32 29 -32 20 -66 -37 -145 -29 -41 -64 -93 -77 -116 -37 -66 -22 -70 158
                -36 10 2 33 4 51 4 28 1 32 4 32 27 0 26 -1 26 -42 19 -24 -3 -65 -9 -93 -12
                -40 -4 -47 -3 -38 8 140 174 159 241 87 298 -35 28 -107 28 -151 1z"/>
                <path d="M8998 14319 c-15 -6 -37 -26 -49 -46 -19 -30 -21 -44 -16 -101 13
                -159 64 -228 160 -219 38 3 56 11 80 36 30 30 32 36 31 100 -2 90 -28 177 -64
                212 -23 23 -37 29 -72 28 -24 0 -55 -5 -70 -10z m95 -57 c21 -23 47 -124 47
                -183 0 -33 -6 -51 -20 -64 -24 -22 -64 -14 -84 18 -16 23 -46 143 -46 180 0
                57 67 89 103 49z"/>
                <path d="M8680 14241 c-41 -15 -47 -21 -63 -70 -20 -60 -15 -72 26 -64 22 4
                27 11 27 34 0 62 79 91 109 38 20 -37 8 -82 -49 -182 -49 -86 -60 -120 -40
                -132 11 -7 230 52 245 66 6 6 3 15 -7 25 -14 14 -22 13 -87 -6 -40 -12 -75
                -20 -78 -16 -3 3 10 32 29 63 68 112 77 186 29 234 -34 34 -70 36 -141 10z"/>
                <path d="M8190 14074 c-19 -9 -70 -29 -114 -45 -92 -34 -106 -43 -99 -69 7
                -25 20 -25 77 0 25 10 47 16 50 12 2 -4 29 -70 61 -147 31 -77 59 -142 61
                -144 8 -9 54 11 54 24 0 12 -60 163 -105 263 l-15 34 50 21 c40 17 50 26 48
                42 -4 26 -24 28 -68 9z"/>
                <path d="M13000 13933 c-19 -8 -84 -32 -145 -53 -210 -74 -199 -70 -277 -103
                -42 -18 -44 -23 -63 -194 -27 -247 -17 -626 25 -938 39 -288 186 -760 287
                -923 l20 -32 47 122 c27 68 54 137 61 153 32 71 75 187 75 204 0 9 -11 51 -25
                92 -50 143 -85 311 -96 454 -12 149 -6 532 11 645 12 87 29 190 34 215 17 80
                51 221 68 277 26 90 23 101 -22 81z"/>
                <path d="M7845 13923 c-35 -9 -103 -57 -114 -81 -26 -55 -2 -111 57 -133 16
                -6 58 -8 103 -4 63 6 79 4 92 -10 23 -23 21 -42 -7 -70 -37 -36 -72 -42 -107
                -16 -23 17 -33 19 -49 11 -29 -16 -24 -36 15 -60 40 -25 93 -21 157 11 76 39
                92 113 36 169 l-32 32 -84 -6 c-68 -6 -88 -4 -108 9 -31 20 -30 39 1 70 28 29
                79 33 106 9 14 -12 22 -13 39 -4 30 16 21 42 -20 62 -36 17 -50 19 -85 11z"/>
                <path d="M9849 13861 c-13 -10 -62 -40 -109 -66 -47 -26 -87 -51 -90 -54 -3
                -4 -60 -34 -127 -66 -75 -37 -122 -66 -123 -75 0 -8 10 -31 22 -50 31 -51 134
                -259 163 -332 50 -122 97 -344 110 -515 12 -173 -32 -363 -102 -435 -61 -63
                -104 -76 -333 -103 -327 -38 -592 -184 -683 -375 -27 -56 -31 -76 -32 -147 0
                -76 2 -83 31 -119 50 -62 106 -85 298 -125 93 -19 173 -49 187 -72 12 -18 -3
                -71 -31 -112 -35 -51 -157 -114 -280 -146 -121 -32 -279 -32 -377 -1 -148 46
                -231 151 -220 276 5 52 10 65 36 88 20 18 43 28 64 29 129 3 122 1 119 37 -4
                35 -38 136 -106 314 -58 151 -84 201 -100 195 -8 -3 -35 -8 -62 -12 -84 -12
                -189 -69 -263 -144 -166 -166 -242 -380 -213 -604 28 -223 120 -382 282 -488
                144 -93 392 -145 580 -120 314 43 581 206 741 454 64 99 83 159 83 267 0 78
                -3 102 -21 135 -33 63 -99 118 -188 154 -44 18 -84 36 -88 40 -15 15 5 38 51
                59 79 35 113 42 258 51 254 17 371 82 486 274 22 37 42 67 44 67 2 0 15 -22
                29 -50 95 -188 347 -315 554 -280 156 26 268 82 377 190 133 130 194 257 202
                419 7 141 -30 304 -88 391 -9 14 -19 32 -22 40 -19 52 -170 200 -205 200 -7 0
                -54 -62 -103 -137 -50 -76 -94 -143 -98 -148 -4 -6 -26 -38 -50 -72 l-43 -62
                32 -28 c107 -93 149 -167 149 -262 0 -56 -3 -63 -37 -100 -43 -45 -94 -62
                -183 -62 -113 -1 -204 63 -263 184 -64 132 -75 208 -78 542 -3 275 -26 518
                -74 777 -27 140 -47 198 -68 198 -8 0 -25 -8 -38 -19z"/>
                <path d="M7586 13785 c-15 -8 -62 -36 -102 -61 -71 -44 -74 -48 -61 -68 8 -11
                47 -77 86 -146 40 -69 79 -131 86 -139 11 -12 25 -6 92 34 43 26 88 53 101 59
                12 6 20 17 17 24 -3 8 -5 18 -5 23 0 16 -19 10 -91 -31 -39 -22 -74 -40 -79
                -40 -10 0 -52 89 -46 98 3 5 30 21 60 37 56 29 73 59 42 71 -14 5 -67 -17 -96
                -41 -30 -24 -50 -25 -64 -2 -35 55 -32 63 44 108 78 46 83 50 74 73 -8 20 -21
                20 -58 1z"/>
                <path d="M11591 13009 c-117 -20 -229 -115 -300 -257 -52 -103 -73 -192 -73
                -309 0 -117 13 -176 68 -289 36 -76 55 -102 111 -154 114 -104 218 -155 377
                -185 47 -9 119 -15 158 -13 62 3 73 1 76 -14 4 -19 -67 -117 -116 -160 -97
                -86 -326 -140 -497 -118 -131 17 -161 22 -177 26 -28 8 -22 -14 32 -111 27
                -49 72 -133 99 -185 27 -52 76 -133 108 -180 l59 -85 64 2 c186 7 377 114 515
                286 157 197 237 546 214 937 -23 405 -232 736 -507 801 -83 20 -126 22 -211 8z
                m266 -517 c70 -44 166 -300 124 -327 -13 -7 -142 29 -195 55 -90 43 -135 118
                -121 201 7 41 48 82 90 91 28 7 76 -3 102 -20z"/>
                <path d="M10375 11535 c-148 -32 -265 -79 -265 -106 0 -22 115 -364 127 -379
                2 -2 7 0 11 6 7 10 59 36 191 96 100 45 215 71 291 65 67 -5 159 -39 207 -77
                15 -11 30 -17 34 -13 9 10 87 221 91 247 2 12 -5 24 -17 31 -11 5 -40 22 -65
                37 -148 86 -434 131 -605 93z"/>
                <path d="M11099 10878 c-12 -23 -38 -68 -59 -98 -20 -30 -39 -63 -43 -72 -3
                -10 7 -84 24 -165 27 -138 36 -226 53 -545 5 -84 3 -99 -13 -120 -17 -20 -28
                -23 -98 -23 -148 0 -178 32 -167 179 4 57 2 112 -5 145 -15 71 -70 201 -84
                201 -12 -1 -38 -39 -100 -144 -26 -43 -28 -53 -19 -80 6 -17 25 -69 41 -116
                17 -47 31 -101 31 -121 0 -63 -14 -68 -195 -70 -92 -1 -171 3 -186 9 -14 6
                -38 25 -54 43 -27 33 -28 34 -21 139 25 430 16 624 -40 818 -9 28 -19 52 -23
                52 -4 0 -15 -17 -25 -37 -9 -21 -37 -68 -62 -104 l-45 -66 15 -59 c36 -138 48
                -252 53 -513 5 -218 3 -265 -8 -272 -25 -16 -677 -11 -791 6 -126 19 -208 59
                -253 123 -27 39 -30 51 -30 120 0 43 4 102 8 132 l8 55 -30 -34 c-36 -40 -93
                -154 -115 -230 -22 -76 -21 -172 3 -219 28 -54 77 -100 141 -132 106 -53 129
                -55 595 -55 482 0 465 -2 500 72 10 21 19 40 21 42 1 2 24 -18 49 -43 48 -47
                146 -89 153 -66 3 7 8 7 18 -1 9 -7 55 -10 141 -7 150 4 178 15 212 85 l22 45
                39 -45 c55 -63 126 -91 204 -83 80 8 114 31 146 95 l27 53 18 -29 c26 -41 64
                -73 115 -97 41 -19 66 -21 280 -24 129 -2 294 -1 366 3 l130 7 32 97 c18 53
                32 104 32 112 0 12 -29 13 -189 11 l-189 -4 -25 34 c-30 39 -77 175 -79 231
                -1 24 4 42 13 48 17 12 137 3 176 -12 15 -7 65 -12 110 -13 74 -1 84 1 108 24
                31 29 108 177 99 191 -3 5 -33 9 -67 9 -34 1 -91 7 -127 15 -197 43 -297 -9
                -393 -205 -41 -84 -42 -87 -44 -200 l-2 -115 -94 2 c-113 2 -163 21 -189 72
                -15 30 -16 59 -11 250 4 181 2 244 -16 392 -18 155 -51 333 -65 346 -2 3 -15
                -15 -27 -39z"/>
                <path d="M9456 10449 c-38 -25 -55 -46 -77 -93 -16 -34 -29 -69 -29 -78 0 -27
                21 -66 39 -73 9 -4 80 -6 159 -5 119 1 142 -2 142 -14 0 -23 -32 -28 -183 -30
                l-140 -2 -23 -45 c-13 -24 -23 -50 -24 -56 0 -20 271 -18 341 3 63 19 113 66
                130 124 28 94 -12 119 -207 127 -74 3 -137 10 -141 15 -13 22 27 41 95 46 65
                4 72 7 81 31 6 14 12 37 13 51 3 24 1 25 -62 28 -59 3 -70 0 -114 -29z"/>
                <path d="M8290 10423 c-65 -11 -181 -47 -237 -74 -72 -34 -74 -41 -44 -135 10
                -32 36 -112 56 -176 l37 -118 52 28 c28 15 53 30 54 35 2 4 10 7 18 7 8 0 36
                11 62 24 109 54 203 79 297 80 83 0 94 -2 150 -33 33 -18 68 -40 77 -48 15
                -13 18 -13 21 -2 14 51 44 133 68 186 16 34 26 69 23 77 -10 27 -161 93 -294
                128 -72 19 -278 32 -340 21z"/>
                <path d="M10712 9510 c-24 -33 -47 -60 -52 -60 -5 0 -38 25 -74 55 -35 30 -69
                55 -75 55 -9 0 -129 -152 -137 -175 -5 -13 149 -165 167 -165 8 0 30 28 49 61
                19 33 40 65 46 70 8 7 36 -14 89 -67 42 -42 79 -73 83 -69 10 9 78 124 104
                173 l23 44 -55 49 c-52 48 -108 89 -121 89 -3 0 -24 -27 -47 -60z"/>
                <path d="M9965 8824 c-6 -2 -9 -62 -7 -158 l3 -155 -27 -17 c-21 -14 -48 -18
                -128 -18 -151 0 -183 19 -174 105 2 28 0 34 -17 34 -16 0 -21 -9 -27 -47 -16
                -91 24 -127 152 -139 74 -6 189 5 221 22 10 5 32 2 57 -8 37 -14 45 -14 88 0
                40 13 51 13 68 2 23 -15 93 -13 121 2 12 7 26 6 47 -5 47 -23 150 -12 228 26
                l65 31 26 -32 c25 -30 31 -32 90 -32 35 0 76 3 90 7 46 13 60 75 38 164 -11
                44 -22 52 -48 35 -12 -8 -12 -16 2 -53 33 -85 17 -108 -70 -108 -63 0 -100 31
                -52 43 23 6 22 26 -2 38 -92 46 -161 69 -208 69 -51 0 -52 -1 -49 -27 3 -25 6
                -28 37 -25 43 5 121 -17 121 -33 0 -36 -201 -81 -249 -56 -19 11 -21 17 -15
                57 6 43 5 44 -20 44 -21 0 -26 -5 -26 -26 0 -28 -16 -65 -34 -76 -17 -12 -61
                -9 -79 5 -13 10 -17 41 -23 175 -6 149 -8 162 -25 162 -18 0 -19 -11 -19 -163
                0 -175 -3 -187 -50 -187 -55 0 -59 11 -66 188 -7 158 -10 169 -39 156z"/>
                <path d="M8745 8788 c-71 -35 -115 -74 -115 -102 0 -12 26 -46 65 -82 99 -94
                85 -124 -58 -124 -92 0 -101 6 -94 59 3 23 1 42 -4 43 -5 0 -14 1 -20 2 -6 1
                -18 -21 -27 -49 l-17 -50 -45 0 -45 0 -32 65 c-34 69 -40 75 -63 60 -13 -8
                -13 -12 1 -37 48 -81 21 -158 -69 -203 -47 -24 -52 -30 -42 -51 12 -22 26 -18
                91 23 25 16 56 47 68 69 19 33 25 37 41 29 26 -14 80 -12 110 4 21 12 29 12
                52 0 38 -20 181 -13 226 10 37 19 49 54 32 95 -12 29 -97 121 -112 121 -4 0
                -8 6 -8 14 0 7 38 32 85 55 76 38 84 45 75 62 -14 24 -22 23 -95 -13z"/>
                <path d="M8891 8781 c-11 -7 -12 -40 -6 -180 7 -168 8 -172 29 -169 23 3 21
                -20 18 246 -2 114 -6 125 -41 103z"/>
                <path d="M12358 8672 c-36 -4 -88 -64 -88 -102 0 -16 11 -42 26 -60 l27 -31
                -59 3 -59 3 -30 63 c-19 41 -35 62 -47 62 -22 0 -33 -17 -20 -33 24 -29 31
                -88 16 -127 -16 -39 -76 -90 -107 -90 -10 0 -17 -8 -17 -20 0 -69 138 4 164
                87 6 19 11 20 39 12 52 -15 126 -10 206 12 82 23 95 33 80 61 -9 17 -12 17
                -39 3 -42 -22 -77 -19 -105 10 -49 48 -21 99 53 100 39 1 47 4 47 20 0 21 -39
                33 -87 27z"/>
                <path d="M11570 8615 c-25 -14 -67 -49 -93 -78 -46 -50 -48 -51 -63 -32 -8 11
                -18 31 -21 45 -8 36 -21 49 -43 43 -22 -6 -26 -33 -9 -50 5 -5 13 -35 16 -66
                5 -52 4 -58 -25 -86 -25 -26 -38 -31 -77 -31 -59 0 -113 25 -121 55 -3 13 -4
                42 -2 66 3 38 0 44 -17 44 -16 0 -21 -9 -27 -53 -16 -108 33 -156 159 -157 69
                0 73 2 108 35 19 19 39 48 44 65 6 22 13 29 27 27 62 -12 191 -13 229 -2 96
                27 125 111 60 176 -32 32 -86 32 -145 -1z m114 -41 c22 -21 20 -47 -5 -70 -17
                -15 -40 -20 -108 -22 l-86 -4 39 41 c64 66 128 88 160 55z"/>
                <path d="M9063 8615 c-51 -22 -79 -97 -53 -145 12 -23 72 -44 101 -35 16 5 20
                3 17 -10 -5 -26 -51 -57 -95 -64 -31 -6 -37 -11 -35 -26 5 -28 6 -28 52 -20
                46 8 102 51 126 96 27 53 12 164 -27 195 -25 20 -53 23 -86 9z"/>
                <path d="M11830 8595 c-15 -16 -24 -41 -27 -72 -6 -62 15 -84 81 -85 51 -1 56
                -8 26 -38 -24 -24 -62 -40 -96 -40 -17 0 -24 -5 -24 -20 0 -28 24 -35 71 -21
                103 31 150 141 107 254 -20 53 -97 66 -138 22z"/>
                </g>
                </svg>
            </div>
            
            <ul class="nav-links">
                <li class="nav-item active" onclick="switchTab('home')">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</li>
                <li class="nav-item" onclick="switchTab('products')">Ø§Ù„Ø¬ÙˆØ§Ù„Ø§Øª</li>
                <li class="nav-item" onclick="switchTab('my-orders')">Ø·Ù„Ø¨Ø§ØªÙŠ</li>
            </ul>
            <div class="cart-icon" onclick="toggleCart()">
                <i class="fas fa-shopping-bag fa-lg"></i>
                <span class="cart-badge" id="cartBadge">0</span>
            </div>
        </nav>

        <section id="home" class="page-section active">
            <div class="hero-banner">
                <div class="hero-text">
                    <h1>Ø§ÙƒØªØ´Ù<br><span style="color:var(--primary-red)">Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„</span></h1>
                    <p style="color:#666; font-size:1.3rem; margin:20px 0; line-height: 1.6;">Ø£Ù‚ÙˆÙ‰ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø¹Ù„Ù‰ Ø£Ø­Ø¯Ø« Ø§Ù„Ù‡ÙˆØ§ØªÙ Ø§Ù„Ø°ÙƒÙŠØ©<br>Ù…Ø¹ Ø¶Ù…Ø§Ù† Ø§Ù„ÙˆÙƒÙŠÙ„ ÙˆØ£ÙØ¶Ù„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±.</p>
                    <button class="enter-btn-main" onclick="switchTab('products')">ØªØµÙØ­ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</button>
                </div>
                <div class="hero-img">
                    <img src="lo.svg" alt="Hero Phone">
                </div>
            </div>
        </section>

        <section id="products" class="page-section">
            <div class="products-container">
                <div class="section-header">
                    <h2>Ø§Ø®ØªØ± Ø¬Ù‡Ø§Ø²Ùƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯</h2>
                    <p style="color:#888;">ØªØ´ÙƒÙŠÙ„Ø© Ù…Ù…ÙŠØ²Ø© Ø¨Ø£Ø³Ø¹Ø§Ø± Ù…Ù†Ø§ÙØ³Ø©</p>
                </div>
                <div class="products-grid" id="productsGrid"></div>
            </div>
        </section>

        <section id="product-detail" class="page-section">
            <button onclick="switchTab('products')" style="margin: 0 10% 20px; border:none; background:none; cursor:pointer; font-size:1.1rem; font-family: var(--font-body); font-weight: 600;">
                <i class="fas fa-arrow-right"></i> Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª
            </button>
            <div class="detail-view" id="detailContent"></div>
        </section>

        <section id="checkout" class="page-section">
            <div class="checkout-container">
                <div class="checkout-form">
                    <h2 style="margin-bottom:20px;">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø­Ù†</h2>
                    <div class="form-group"><label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label><input type="text" id="customerName" class="form-control" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ"></div>
                    <div class="form-group"><label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label><input type="tel" id="customerPhone" class="form-control" placeholder="07..."></div>
                    <div class="form-group"><label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø§Ù„ØªÙØµÙŠÙ„</label><input type="text" id="customerAddress" class="form-control" placeholder="Ø¨ØºØ¯Ø§Ø¯ØŒ Ø§Ù„Ù…Ù†ØµÙˆØ±ØŒ Ù‚Ø±Ø¨..."></div>
                    
                    <h3 style="margin:30px 0 15px;">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</h3>
                    <div class="payment-methods">
                        <div class="payment-option" onclick="selectPayment('online')" id="payOnline">
                            <i class="far fa-credit-card fa-lg" style="color:var(--primary-red)"></i>
                            <div><strong>Ø¯ÙØ¹ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (Visa)</strong><div style="font-size:0.8rem; color:var(--success); font-weight:600;" id="discountLabel">Ø®ØµÙ… 10% ÙÙˆØ±ÙŠ</div></div>
                        </div>
                        <div class="payment-option" onclick="selectPayment('cod')" id="payCod">
                            <i class="fas fa-money-bill-wave fa-lg" style="color:#555"></i>
                            <div><strong>Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</strong><div id="codStatusMsg" style="font-size:0.8rem; color:red; display:none;">ØºÙŠØ± Ù…ØªØ§Ø­ Ø­Ø§Ù„ÙŠØ§Ù‹</div></div>
                        </div>
                    </div>
                </div>

                <div class="order-summary">
                    <h3>Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨</h3>
                    <div id="checkoutItems" style="margin:20px 0; max-height:200px; overflow-y:auto;"></div>
                    <hr style="border-color:#eee; margin:15px 0;">
                    <div class="summary-row"><span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ:</span><span id="subTotal">0 $</span></div>
                    <div class="summary-row discount-text"><span>Ø§Ù„Ø®ØµÙ…:</span><span id="discountVal">0 $</span></div>
                    <hr style="border-color:#eee; margin:15px 0;">
                    <div class="summary-row" style="font-size:1.5rem; font-weight:900; color:var(--text-dark);"><span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span><span id="finalTotal">0 $</span></div>
                    <button class="checkout-btn" onclick="submitOrder()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</button>
                </div>
            </div>
        </section>

        <section id="my-orders" class="page-section">
            <div class="orders-container">
                <div class="section-header">
                    <h2>Ø·Ù„Ø¨Ø§ØªÙŠ</h2>
                    <p>ØªØªØ¨Ø¹ Ø­Ø§Ù„Ø© Ø·Ù„Ø¨Ø§ØªÙƒ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</p>
                </div>
                
                <div class="search-box">
                    <input type="tel" id="trackPhone" class="form-control" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù„Ù„Ø¨Ø­Ø«...">
                    <button class="add-btn" onclick="trackOrders()" style="width: auto; margin:0;">Ø¨Ø­Ø«</button>
                </div>

                <div id="ordersList">
                    <p style="text-align:center; color:#888;">Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙÙƒ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</p>
                </div>
            </div>
        </section>
    </div>

    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header"><h3>Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</h3><i class="fas fa-times" style="cursor:pointer;" onclick="toggleCart()"></i></div>
        <div class="cart-items" id="cartItemsContainer"></div>
        <div class="cart-footer">
            <div class="total-row"><span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</span><span id="cartTotal">0 $</span></div>
            <button class="checkout-btn" onclick="goToCheckout()">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡</button>
        </div>
    </div>

    <div class="whatsapp-float">
        <a href="https://wa.me/96400000000" target="_blank" class="wa-btn"><i class="fab fa-whatsapp"></i><span class="wa-tooltip">ÙØ±Ø¹ Ø§Ù„Ø¹Ø±Ø§Ù‚</span></a>
        <a href="https://wa.me/44000000000" target="_blank" class="wa-btn" style="background:#005c4b;"><i class="fab fa-whatsapp"></i><span class="wa-tooltip">ÙØ±Ø¹ Ø¨Ø±ÙŠØ·Ø§Ù†ÙŠØ§</span></a>
    </div>

    <script>
        const SUPABASE_URL = 'https://wetluuertelivaztjwhy.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_Bx2bp8LptcUFrN3dejNE2Q_-j6Y9Ln1';
        const db = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        let cart = [];
        let products = [];
        let currentPaymentMethod = 'online';
        let settings = { discount_rate: 10, cod_enabled: true };

        async function fetchSettings() {
            const { data } = await db.from('site_settings').select('*').single();
            if(data) {
                settings = data;
                document.getElementById('discountLabel').innerText = `Ø®ØµÙ… ${settings.discount_rate}% ÙÙˆØ±ÙŠ`;
                const codBtn = document.getElementById('payCod');
                const codMsg = document.getElementById('codStatusMsg');
                if(!settings.cod_enabled) {
                    codBtn.classList.add('disabled');
                    codMsg.style.display = 'block';
                    if(currentPaymentMethod === 'cod') selectPayment('online');
                } else {
                    codBtn.classList.remove('disabled');
                    codMsg.style.display = 'none';
                }
            }
        }

        async function fetchProducts() {
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = '<p style="text-align:center; margin-top:20px;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...</p>';
            const { data, error } = await db.from('products').select('*');
            if (error) { console.error('Error:', error); grid.innerHTML = '<p style="color:red; text-align:center;">Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„</p>'; }
            else {
                if(data.length === 0) grid.innerHTML = '<div style="text-align:center; width:100%; padding:20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹.</div>';
                else { products = data; renderProducts(); }
            }
        }

        async function trackOrders() {
            const phone = document.getElementById('trackPhone').value;
            if(!phone) return alert('ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ');
            
            const list = document.getElementById('ordersList');
            list.innerHTML = '<p style="text-align:center;">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...</p>';

            const { data: orders, error } = await db.from('orders')
                .select('*')
                .eq('phone', phone)
                .order('created_at', { ascending: false });

            if(orders && orders.length > 0) {
                list.innerHTML = orders.map(o => `
                    <div class="order-card">
                        <div class="order-header">
                            <b>Ø·Ù„Ø¨ #${o.id}</b>
                            <span class="status-badge status-${o.status || 'pending'}">
                                ${o.status === 'pending' ? 'Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©' : (o.status === 'shipped' ? 'ØªÙ… Ø§Ù„Ø´Ø­Ù†' : 'Ù…ÙƒØªÙ…Ù„')}
                            </span>
                        </div>
                        <div style="display:flex; justify-content:space-between; font-size:0.9rem; color:#666;">
                            <span>${new Date(o.created_at).toLocaleDateString('ar-EG')}</span>
                            <span style="font-weight:bold; color:var(--primary-red);">$${o.total_price}</span>
                        </div>
                    </div>
                `).join('');
            } else {
                list.innerHTML = '<p style="text-align:center;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù….</p>';
            }
        }

        async function submitOrder() {
            const name = document.getElementById('customerName').value;
            const phone = document.getElementById('customerPhone').value;
            const address = document.getElementById('customerAddress').value;
            const totalText = document.getElementById('finalTotal').innerText.replace('$', '').replace(' ', '');
            
            if(!name || !phone || !address) { alert('ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©'); return; }
            if(currentPaymentMethod === 'cod' && !settings.cod_enabled) { alert('Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… ØºÙŠØ± Ù…ØªØ§Ø­ Ø­Ø§Ù„ÙŠØ§Ù‹.'); return; }

            const btn = document.querySelector('.checkout-btn');
            btn.innerText = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...';
            btn.disabled = true;

            const { error } = await db.from('orders').insert({
                customer_name: name, phone: phone, address: address,
                total_price: parseFloat(totalText), payment_method: currentPaymentMethod,
                items: cart, status: 'pending'
            });

            if (error) { alert('Ø­Ø¯Ø« Ø®Ø·Ø£: ' + error.message); btn.innerText = 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨'; btn.disabled = false; }
            else {
                alert('ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! Ø§Ù†ØªÙ‚Ù„ Ù„ØµÙØ­Ø© "Ø·Ù„Ø¨Ø§ØªÙŠ" Ù„Ù…ØªØ§Ø¨Ø¹ØªÙ‡.');
                cart = []; updateCartUI();
                document.getElementById('trackPhone').value = phone;
                switchTab('my-orders'); 
                trackOrders(); 
                btn.innerText = 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨';
                btn.disabled = false;
            }
        }

        function enterApp() {
            document.getElementById('intro').classList.add('intro-hidden');
            setTimeout(() => {
                document.getElementById('app').classList.add('visible');
                document.body.style.overflow = 'auto';
                fetchProducts(); fetchSettings();
            }, 800);
        }

        function renderProducts() {
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = products.map(p => `
                <div class="product-card" onclick="showProductDetails(${p.id})">
                    <div class="img-container">
                        <img src="${p.image_url}" class="product-img" onerror="this.src='https://via.placeholder.com/300'">
                    </div>
                    <h3 class="product-name">${p.name}</h3>
                    <div class="product-price">$${p.price}</div>
                    <button class="add-btn" onclick="event.stopPropagation(); addToCart(${p.id})">
                        <i class="fas fa-cart-plus"></i> Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©
                    </button>
                </div>
            `).join('');
        }

        function showProductDetails(id) {
            const product = products.find(p => p.id === id);
            const detailContent = document.getElementById('detailContent');
            detailContent.innerHTML = `
                <div class="detail-img-box"><img src="${product.image_url}" onerror="this.src='https://via.placeholder.com/300'"></div>
                <div class="detail-info">
                    <h1 class="detail-title">${product.name}</h1>
                    <span class="detail-price">$${product.price}</span>
                    <p style="color:#666; font-size:1.1rem; line-height:1.6;">${product.description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ.'}</p>
                    <ul class="specs-list"><li><i class="fas fa-check-circle"></i> Ø¶Ù…Ø§Ù† Ù„Ù…Ø¯Ø© Ø³Ù†ØªÙŠÙ†</li><li><i class="fas fa-check-circle"></i> ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹</li></ul>
                    <button class="enter-btn-main" onclick="addToCart(${product.id})">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø© Ø§Ù„Ø¢Ù†</button>
                </div>
            `;
            switchTab('product-detail');
        }

        function addToCart(id) {
            const product = products.find(p => p.id === id);
            cart.push(product); updateCartUI();
            const badge = document.getElementById('cartBadge');
            badge.style.transform = 'scale(1.5)'; setTimeout(() => badge.style.transform = 'scale(1)', 200);
        }

        function removeFromCart(index) { cart.splice(index, 1); updateCartUI(); }

        function updateCartUI() {
            const container = document.getElementById('cartItemsContainer');
            document.getElementById('cartBadge').innerText = cart.length;
            let total = 0;
            container.innerHTML = cart.map((item, index) => {
                total += item.price;
                return `<div class="cart-item"><img src="${item.image_url}" onerror="this.src='https://via.placeholder.com/50'"><div style="flex:1;"><div style="font-weight:bold;">${item.name}</div><div style="color:var(--primary-red);">$${item.price}</div></div><i class="fas fa-trash" style="color:#aaa; cursor:pointer;" onclick="removeFromCart(${index})"></i></div>`;
            }).join('');
            document.getElementById('cartTotal').innerText = `$${total}`;
        }

        function goToCheckout() { 
            if(cart.length === 0) { alert('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©!'); return; } 
            toggleCart(); 
            if(settings.cod_enabled) { selectPayment('cod'); } else { selectPayment('online'); }
            updateCheckoutSummary(); 
            switchTab('checkout'); 
        }

        function selectPayment(method) { 
            if(method === 'cod' && !settings.cod_enabled) return;
            currentPaymentMethod = method; 
            document.querySelectorAll('.payment-option').forEach(el => el.classList.remove('selected')); 
            if(method === 'online') document.getElementById('payOnline').classList.add('selected'); 
            else document.getElementById('payCod').classList.add('selected'); 
            updateCheckoutSummary(); 
        }

        function updateCheckoutSummary() {
            const itemsContainer = document.getElementById('checkoutItems');
            let subTotal = cart.reduce((sum, item) => sum + item.price, 0);
            itemsContainer.innerHTML = cart.map(item => `<div style="display:flex; justify-content:space-between; margin-bottom:5px; font-size:0.9rem;"><span>${item.name}</span><span>$${item.price}</span></div>`).join('');
            document.getElementById('subTotal').innerText = `$${subTotal}`;
            let discount = currentPaymentMethod === 'online' ? subTotal * (settings.discount_rate / 100) : 0;
            document.getElementById('discountVal').innerText = `-$${discount.toFixed(2)}`;
            document.getElementById('finalTotal').innerText = `$${(subTotal - discount).toFixed(2)}`;
        }

        function switchTab(tabId) { document.querySelectorAll('.page-section').forEach(sec => sec.classList.remove('active')); document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active')); document.getElementById(tabId).classList.add('active'); if(tabId === 'home' || tabId === 'products') { document.querySelectorAll('.nav-item')[1].classList.add('active'); } window.scrollTo(0,0); }
        function toggleCart() { document.getElementById('cartSidebar').classList.toggle('open'); }
        document.addEventListener('mousemove', (e) => { const wrapper = document.getElementById('phoneWrapper'); if (!document.getElementById('intro').classList.contains('intro-hidden')) { let x = (window.innerWidth / 2 - e.pageX) / 25; let y = (window.innerHeight / 2 - e.pageY) / 25; wrapper.style.transform = `rotateY(${20 + x}deg) rotateX(${5 + y}deg)`; } });
        window.onload = () => { window.scrollTo(0,0); };
    </script>
</body>
</html>
